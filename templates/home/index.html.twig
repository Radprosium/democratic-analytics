{% extends 'base.html.twig' %}

{% block title %}Democratic Analytics â€” Political Analysis{% endblock %}

{% block body %}
    <section class="hero">
        <h1>Democratic Analytics</h1>
        <p class="hero-subtitle">AI-powered political analysis for informed citizens</p>
        <p class="hero-description">
            Track political subjects, understand media coverage, explore debates from every angle,
            and make informed decisions.
        </p>
        <a href="{{ path('app_subject_index') }}" class="btn btn-primary">Browse Subjects</a>
    </section>

    {% if subjects|length > 0 %}
        <section class="section">
            <h2>Latest Active Subjects</h2>
            <div class="subject-grid">
                {% for subject in subjects %}
                    <article class="subject-card">
                        <div class="subject-card-header">
                            <span class="badge {{ subject.status.badge }}">{{ subject.status.label }}</span>
                            <span class="importance importance-{{ subject.importance }}">
                                {{ subject.importance }}/10
                            </span>
                        </div>
                        <h3>
                            <a href="{{ path('app_subject_show', {slug: subject.slug}) }}">
                                {{ subject.title }}
                            </a>
                        </h3>
                        <p class="subject-category">{{ subject.category.label }}</p>
                        <p class="subject-excerpt">
                            {{ subject.summary|length > 200 ? subject.summary|slice(0, 200) ~ '...' : subject.summary }}
                        </p>
                        <div class="subject-card-footer">
                            <time datetime="{{ subject.updatedAt|date('Y-m-d') }}">
                                {{ subject.updatedAt|date('M d, Y') }}
                            </time>
                        </div>
                    </article>
                {% endfor %}
            </div>
        </section>
    {% else %}
        <section class="section empty-state">
            <h2>No subjects yet</h2>
            <p>
                Run <code>make sf c=app:retrieve-news</code> to fetch the latest political subjects
                via AI analysis.
            </p>
        </section>
    {% endif %}
{% endblock %}
